<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<style>
  /* Cài đặt phông chữ và bố cục chung */
  body { font-family: 'Arial', sans-serif; background-color: #f9f9f9; padding: 20px; }
  
  /* Lưới sản phẩm */
  .grid-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    padding: 10px;
    height: 95vh;
    box-sizing: border-box;
  }

  /* Thẻ sản phẩm */
  .product-card {
    background: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 15px;
    text-align: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .product-image {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: 5px;
    margin-bottom: 10px;
  }

  .product-name {
    font-size: 16px;
    font-weight: bold;
    color: #333;
    margin: 10px 0;
    text-transform: uppercase;
  }

  .product-price {
    color: #333;
    font-size: 14px;
    margin-bottom: 15px;
  }

  /* Các nút bấm */
  .btn {
    display: block;
    width: 100%;
    padding: 10px 0;
    margin-top: 5px;
    border: none;
    cursor: pointer;
    font-size: 14px;
    text-decoration: none;
    color: white;
    transition: 0.3s;
  }

  .btn-view { background-color: #d32f2f; } /* Màu đỏ */
  .btn-view:hover { background-color: #b71c1c; }

  .btn-add { background-color: #388e3c; margin-top: 10px; } /* Màu xanh lá */
  .btn-add:hover { background-color: #2e7d32; }

  /* Khu vực Giỏ hàng */
  #cart-section {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 300px;
    background: white;
    border: 2px solid #d32f2f;
    border-radius: 10px;
    padding: 15px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    display: none; /* Ẩn khi chưa có hàng */
    z-index: 1000;
  }

  .cart-header { font-weight: bold; border-bottom: 1px solid #ddd; padding-bottom: 5px; margin-bottom: 10px; }
  .cart-item { display: flex; justify-content: space-between; font-size: 13px; margin-bottom: 5px; }
  .cart-total { font-weight: bold; color: #d32f2f; text-align: right; margin-top: 10px; border-top: 1px solid #ddd; padding-top: 5px; }
  
  .btn-checkout { background-color: #d32f2f; width: 100%; margin-top: 10px; }

</style>
</head>
<body>

<div class="grid-container" id="product-list">
  </div>

<div id="cart-section">
  <div class="cart-header">Giỏ hàng của bạn</div>
  <div id="cart-items"></div>
  <div class="cart-total">Tổng: <span id="total-price">0</span>đ</div>
  <button class="btn btn-checkout" onclick="checkout()">Thanh toán ngay</button>
  <button class="btn" style="background:#777; margin-top:5px" onclick="toggleCart()">Đóng / Mở</button>
</div>

<script>
  // Dữ liệu sản phẩm
  const products = [
    { id: 1, name: "Chôm chôm Vĩnh Long", price: 48000, img: "https://clv.vn/wp-content/uploads/2019/10/chom-chom-globalgap-min.jpg" },
    { id: 2, name: "Dâu tây Đà Lạt", price: 190000, img: "https://traicayvuongtron.vn/resources/cache/original_xxxxx/WEBSITE%202023/tim%20hieu%20them/blog/kinh%20nghiem%2Cmeo%20vat/trai%20cay/trai%20cay%20dac%20san/daudalatlagi/dau-tay-da-lat.gif" },
    { id: 3, name: "Dừa Bến Tre", price: 15000, img: "https://media.loveitopcdn.com/22928/thumb/dua-xiem-xanh-ben-tre.jpg" },
    { id: 4, name: "Nho xanh Ninh Thuận", price: 100000, img: "https://nongsandungha.com/wp-content/uploads/2024/08/nho-xanh-ninh-thuan.jpg" },
    { id: 5, name: "Xoài Cát Hòa Lộc", price: 80000, img: "https://cdn.tgdd.vn/Files/2017/12/03/1047079/nguon-goc-xoai-cat-hoa-loc-va-cach-chon-xoai-cat-hoa-loc-tuoi-ngon-202302251347125690.jpg" },
    { id: 6, name: "Vải thiều Thanh Hà", price: 90000, img: "https://cdn.tgdd.vn/2021/07/CookProduct/1-1200x676-6.jpg"},
    { id: 7, name: "Thanh Long Bình Thuận", price: 30000, img: "https://thucphamvanquy.com/wp-content/uploads/2019/10/thanh-long-ru%E1%BB%99t-tr%E1%BA%AFng.png" },
    { id: 8, name: "Măng cụt Chợ Lách", price: 75000, img: "https://cdn-images.vtv.vn/zoom/700_438/2019/6/15/photo-2-1500599816327-15269608981031547982463-156057123979899840711.jpg" },
    { id: 9, name: "Sầu Riêng Ri6", price: 150000, img: "https://product.hstatic.net/200000157781/product/sau_rieng_ri6_977b4b436948421fabd583bbd83f2fb8.png" }
  ];

  let cart = [];

  // Hàm hiển thị sản phẩm ra màn hình
  function renderProducts() {
    const container = document.getElementById('product-list');
    products.forEach(p => {
      const card = `
        <div class="product-card">
          <img src="${p.img}" alt="${p.name}" class="product-image">
          <div class="product-name">${p.name}</div>
          <div class="product-price">${p.price.toLocaleString('vi-VN')} /Kg</div>
          <button class="btn btn-view">Xem thêm</button>
          <button class="btn btn-add" onclick="addToCart(${p.id})">Thêm vào giỏ</button>
        </div>
      `;
      container.innerHTML += card;
    });
  }

  // Hàm thêm vào giỏ
  function addToCart(id) {
    const product = products.find(p => p.id === id);
    cart.push(product);
    updateCart();
    document.getElementById('cart-section').style.display = 'block';
  }

  // Hàm cập nhật giỏ hàng
  function updateCart() {
    const cartItemsDiv = document.getElementById('cart-items');
    const totalSpan = document.getElementById('total-price');
    cartItemsDiv.innerHTML = '';
    
    let total = 0;
    // Gom nhóm sản phẩm giống nhau
    const counts = {};
    cart.forEach(x => { counts[x.name] = (counts[x.name] || 0) + 1; });
    
    // Hiển thị danh sách rút gọn
    for (const [name, count] of Object.entries(counts)) {
       const itemPrice = products.find(p => p.name === name).price;
       total += itemPrice * count;
       cartItemsDiv.innerHTML += `
         <div class="cart-item">
           <span>${name} (x${count})</span>
           <span>${(itemPrice * count).toLocaleString('vi-VN')}đ</span>
         </div>
       `;
    }
    totalSpan.innerText = total.toLocaleString('vi-VN');
  }

  function toggleCart() {
     const cartSec = document.getElementById('cart-section');
     cartSec.style.display = cartSec.style.display === 'none' ? 'block' : 'none';
  }

  // Hàm xử lý thanh toán
  function checkout() {
    if(cart.length === 0) { alert("Giỏ hàng đang trống!"); return; }
    
    let message = "Tôi muốn đặt mua các món sau:\n";
    const counts = {};
    cart.forEach(x => { counts[x.name] = (counts[x.name] || 0) + 1; });
    
    let total = 0;
    for (const [name, count] of Object.entries(counts)) {
       const itemPrice = products.find(p => p.name === name).price;
       total += itemPrice * count;
       message += `- ${name}: ${count}kg (${(itemPrice * count).toLocaleString('vi-VN')}đ)\n`;
    }
    message += `\nTổng cộng: ${total.toLocaleString('vi-VN')}đ`;
    
    // Tùy chọn 1: Hiển thị thông báo để sao chép
    alert(message + "\n\n(Bạn hãy chụp màn hình hoặc sao chép nội dung này gửi cho cửa hàng nhé!)");

    // Tùy chọn 2: Nếu muốn gửi qua Zalo, bạn có thể mở liên kết (cần số điện thoại cụ thể)
    // window.open(`https://zalo.me/SDT_CUA_BAN?text=${encodeURIComponent(message)}`);
  }

  // Chạy hàm hiển thị khi tải trang
  renderProducts();
</script>

</body>
</html>