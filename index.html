<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<style>
  /* Thiết lập chung và lưới 3x3 (Hoạt động tốt trên cả máy tính và điện thoại) */
  body { 
    font-family: 'Arial', sans-serif; 
    margin: 0; 
    padding: 0; 
    background-color: #fff;
    overflow-x: hidden;
  }
  
  .grid-container {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr; 
    gap: 10px; 
    padding: 10px;
    box-sizing: border-box;
  }

  .product-card {
    background: white;
    border: 1px solid #e0e0e0;
    border-radius: 5px;
    padding: 8px;
    text-align: center;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .product-image {
    width: 100%;
    height: 100px;
    object-fit: cover;
    border-radius: 4px;
    margin-bottom: 5px;
  }

  .product-name {
    font-size: 13px;
    font-weight: bold;
    color: #333;
    margin: 5px 0;
    white-space: nowrap; 
    overflow: hidden; 
    text-overflow: ellipsis;
  }

  .product-price {
    font-size: 13px;
    color: #333;
    margin-bottom: 8px;
  }

  .btn-group {
    display: flex;
    gap: 5px;
  }

  .btn {
    flex: 1; 
    padding: 6px 0;
    border: none;
    border-radius: 3px;
    cursor: pointer;
    font-size: 11px;
    color: white;
    font-weight: bold;
  }

  .btn-view { background-color: #d32f2f; }
  .btn-add { background-color: #388e3c; }


  /* --- GIỎ HÀNG LINH HOẠT (FIXED CART) --- */

  /* Màn hình lớn */
  #cart-floating {
    position: fixed;
    bottom: 10px;
    right: 10px;
    background: #d32f2f;
    color: white;
    padding: 8px 15px;
    border-radius: 20px; 
    font-size: 13px;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    z-index: 999;
    display: none;
  }

  /* Màn hình nhỏ */
  @media (max-width: 600px) {
    #cart-floating {
      bottom: 0;
      right: 0;
      left: 0;
      width: 100%; 
      border-radius: 0; 
      text-align: center;
      padding: 15px 0; 
      font-size: 16px;
      box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
    }
    
    .grid-container {
        grid-template-columns: 1fr 1fr;
        padding-bottom: 60px;
    }
    
     .product-image {
        height: 120px; 
     }
  }
</style>
</head>
<body>

<div class="grid-container" id="product-list">
  </div>

<div id="cart-floating" onclick="checkout()">
  Giỏ hàng: <span id="cart-count">0</span> món | Bấm để Thanh toán
</div>

<script>
  // DỮ LIỆU SẢN PHẨM (Đã dùng ảnh của bạn)
  const products = [
    { id: 1, name: "Chôm chôm Vĩnh Long", price: 48000, img: "https://clv.vn/wp-content/uploads/2019/10/chom-chom-globalgap-min.jpg"},
    { id: 2, name: "Dâu tây Đà Lạt", price: 190000, img: "https://traicayvuongtron.vn/resources/cache/original_xxxxx/WEBSITE%202023/tim%20hieu%20them/blog/kinh%20nghiem%2Cmeo%20vat/trai%20cay/trai%20cay%20dac%20san/daudalatlagi/dau-tay-da-lat.gif"},
    { id: 3, name: "Dừa Bến Tre", price: 15000, img: "https://media.loveitopcdn.com/22928/thumb/dua-xiem-xanh-ben-tre.jpg"},
    { id: 4, name: "Nho xanh Ninh Thuận", price: 100000, img: "https://nongsandungha.com/wp-content/uploads/2024/08/nho-xanh-ninh-thuan.jpg"},
    { id: 5, name: "Xoài Cát Hòa Lộc", price: 80000, img: "https://cdn.tgdd.vn/Files/2017/12/03/1047079/nguon-goc-xoai-cat-hoa-loc-va-cach-chon-xoai-cat-hoa-loc-tuoi-ngon-202302251347125690.jpg"},
    { id: 6, name: "Vải thiều Thanh Hà", price: 90000, img: "https://cdn.tgdd.vn/2021/07/CookProduct/1-1200x676-6.jpg"},
    { id: 7, name: "Thanh Long Bình Thuận", price: 30000, img: "https://thucphamvanquy.com/wp-content/uploads/2019/10/thanh-long-ru%E1%BB%99t-tr%E1%BA%AFng.png"},
    { id: 8, name: "Măng cụt Chợ Lách", price: 75000, img: "https://cdn-images.vtv.vn/zoom/700_438/2019/6/15/photo-2-1500599816327-15269608981031547982463-156057123979899840711.jpg"},
    { id: 9, name: "Sầu Riêng Ri6", price: 150000, img: "https://product.hstatic.net/200000157781/product/sau_rieng_ri6_977b4b436948421fabd583bbd83f2fb8.png"}
  ];

  // KHAI BÁO GIỎ HÀNG ĐỂ CHỨC NĂNG PUSH HOẠT ĐỘNG
  let cart = [];

  function render() {
    const container = document.getElementById('product-list');
    container.innerHTML = ''; // Đảm bảo chỉ hiển thị một lần
    products.forEach(p => {
      container.innerHTML += `
        <div class="product-card">
          <img src="${p.img}" class="product-image">
          <div class="product-name">${p.name}</div>
          <div class="product-price">${p.price.toLocaleString('vi-VN')} đ/Kg</div>
          <div class="btn-group">
            <button class="btn btn-view">Xem</button>
            <button class="btn btn-add" onclick="add(${p.id})">Mua</button>
          </div>
        </div>
      `;
    });
  }

  function add(id) {
    const product = products.find(p => p.id === id);
    cart.push(product);
    updateCartDisplay();
    // Báo hiệu trực quan nhỏ cho khách hàng
    const addBtn = event.currentTarget;
    addBtn.innerText = 'Đã thêm!';
    setTimeout(() => { addBtn.innerText = 'Mua'; }, 500);
  }
  
  function updateCartDisplay() {
    const cartBtn = document.getElementById('cart-floating');
    document.getElementById('cart-count').innerText = cart.length;
    cartBtn.style.display = cart.length > 0 ? 'block' : 'none';
  }

  function checkout() {
    if(cart.length === 0) { alert("Giỏ hàng trống!"); return; }
    
    let message = "Đơn hàng mới:\n";
    const counts = {};
    cart.forEach(x => { counts[x.name] = (counts[x.name] || 0) + 1; });
    
    let total = 0;
    for (const [name, count] of Object.entries(counts)) {
       const itemPrice = products.find(p => p.name === name).price;
       total += itemPrice * count;
       message += `- ${name}: ${count}kg (x${count})\n`;
    }
    message += `\nTổng tiền: ${total.toLocaleString('vi-VN')}đ`;
    
    alert(message + "\n\n(Vui lòng cung cấp số điện thoại/địa chỉ để shop liên hệ.)");
  }

  render();
</script>

</body>
</html>